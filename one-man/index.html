<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Population Simulation: The Last Man on Earth</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
	<link rel="preconnect" href="https://cdn.jsdelivr.net">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.27/dist/uPlot.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>

<body>
	<div class="container-fluid min-vh-100 d-flex flex-column">
		<div class="row flex-grow-1">
			<div class="left-panel col-lg-5 col-12 bg-white border-end">
				<h2>Simulation Parameters:</h2>
				<form id="sim-form" autocomplete="off">
					<div class="form-group">
						<label>Initial Females
							<span class="sim-tooltip"
								title="Set the number of initial females as: multiplier × 10^exponent"><i class="bi bi-question-circle"></i></span>
						</label>
						<div class="inline-inputs">
							<input type="number" id="initial_females_multiplier" min="1" max="99" value="1">
							<span class="exp-label">× 10^</span>
							<input type="range" id="initial_females_exponent" min="2" max="10" value="6">
							<span id="initial_females_exp_val">6</span>
						</div>
					</div>
					<div class="form-group slider-row">
						<label for="years">Years:
							<span class="sim-tooltip" title="Number of years to simulate"><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="years" min="1" max="200" step="1" value="100">
						<span id="years_val">100</span>
					</div>
					<div class="form-group slider-row">
						<label for="initial_man_age">Initial Man Age:
							<span class="sim-tooltip"
								title="Age of the first man at the start of the simulation. If multiple first men are there, all will be of the same age."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="initial_man_age" min="0" max="80" step="1" value="20">
						<span id="initial_man_age_val">20</span>
					</div>
					<div class="form-group slider-row">
						<label for="daily_attempted_fertility">Daily Attempted Fertility:
							<span class="sim-tooltip"
								title="Each fertile man will try to impregnate these many females each day."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="daily_attempted_fertility" min="0" max="10" step="0.1" value="1">
						<span id="daily_attempted_fertility_val">1</span>
					</div>
					<div class="form-group" style="margin-bottom: 12px;">
						<div class="d-flex align-items-center gap-2 mb-2">
							<label class="mb-0">Female Fertility Range:
								<span class="sim-tooltip" title="Age range for female fertility"><i class="bi bi-question-circle"></i></span>
							</label>
							<input type="number" id="female_fertility_min" min="0" max="100" value="18">
							<span>to</span>
							<input type="number" id="female_fertility_max" min="0" max="100" value="40">
						</div>
						<div class="d-flex align-items-center gap-2">
							<label class="mb-0">Male Fertility Range:
								<span class="sim-tooltip" title="Age range for male fertility"><i class="bi bi-question-circle"></i></span>
							</label>
							<input type="number" id="male_fertility_min" min="0" max="100" value="18">
							<span>to</span>
							<input type="number" id="male_fertility_max" min="0" max="100" value="45">
						</div>
					</div>
					<div class="form-group slider-row">
						<label for="max_age">Max Age:
							<span class="sim-tooltip"
								title="Maximum age for the simulation. Every person who reaches this age dies automatically, or is excluded from the calculation at least."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="max_age" min="0" max="100" step="1" value="80">
						<span id="max_age_val">80</span>
					</div>
					<div class="form-group slider-row">
						<label for="fertility_rate">Fertility Rate:
							<span class="sim-tooltip" title="Probability of successful pregnancy per attempt."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="fertility_rate" min="0" max="1" step="0.1" value="0.3">
						<span id="fertility_rate_val">0.3</span>
					</div>
					<div class="form-group slider-row">
						<label for="male_birth_loss_rate">Male Birth Loss Rate:
							<span class="sim-tooltip" title="Fraction of male foetus not surviving till birth."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="male_birth_loss_rate" min="0" max="1" step="0.1" value="0">
						<span id="male_birth_loss_rate_val">0</span>
					</div>
					<div class="form-group slider-row">
						<label for="female_birth_loss_rate">Female Birth Loss Rate:
							<span class="sim-tooltip" title="Fraction of female foetus not surviving till birth."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="female_birth_loss_rate" min="0" max="1" step="0.1" value="0">
						<span id="female_birth_loss_rate_val">0</span>
					</div>
					<div class="form-group slider-row">
						<label for="female_death_rate">Female Death Rate:
							<span class="sim-tooltip" title="Annual death rate for females due to random chances."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="female_death_rate" min="0" max="0.2" step="0.01" value="0.01">
						<span id="female_death_rate_val">0.2</span>
					</div>
					<div class="form-group slider-row">
						<label for="male_death_rate">Male Death Rate:
							<span class="sim-tooltip" title="Annual death rate for males due to random chances."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="male_death_rate" min="0" max="0.2" step="0.01" value="0.01">
						<span id="male_death_rate_val">0.2</span>
					</div>
					<div class="form-group slider-row">
						<label for="initial_males">Initial Males:
							<span class="sim-tooltip" title="Number of initial males."><i class="bi bi-question-circle"></i></span>
						</label>
						<input type="range" id="initial_males" min="0" max="10" step="1" value="1">
						<span id="initial_males_val">1</span>
					</div>
					<button type="button" id="calculate"
						class="btn btn-primary w-100 mt-3 calculate-btn">Calculate</button>
					<button type="button" id="reset-storage"
						class="btn btn-link w-100 p-0 mt-1"
						style="font-size:0.95em; color:#888; text-decoration:underline;">Reset all parameters</button>
				</form>
			</div>
			<div class="right-panel col-lg-7 col-12 bg-white d-flex flex-column">
				<h2 class="mb-4">Population Graph:</h2>
				<div id="chart" class="mb-2" style="min-height:320px; margin-bottom:32px;"></div>
				<div class="d-flex align-items-center gap-2 mb-2" id="age-year-slider-row" style="margin-top: 10rem">
					<label for="age-year-slider" class="form-label mb-0">Year:</label>
					<input type="range" id="age-year-slider" min="1" max="1" value="1" step="1" class="w-50">
					<span id="age-year-slider-val">1</span>
				</div>
				<div id="age-bar-chart" style="min-height:320px;"></div>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/uplot@1.6.27/dist/uPlot.iife.min.js"></script>
	<script src="script.js"></script>
</body>

</html>